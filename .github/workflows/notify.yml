name: Notificar Push a ntfy.sh

# Controla cu谩ndo se ejecuta el workflow
on:
  push:
    branches:
      - main
      - master
  # Tambi茅n puedes usar:
  # pull_request:
  # workflow_dispatch:  # Para ejecutar manualmente

# Trabajos que se ejecutar谩n
jobs:
  notificar:
    runs-on: ubuntu-latest  # Sistema operativo donde se ejecuta
    
    steps:
      # Paso 1: Obtener informaci贸n del repositorio
      - name: Checkout c贸digo
        uses: actions/checkout@v4
      
      # Paso 2: Enviar notificaci贸n a ntfy.sh
      - name: Enviar notificaci贸n a ntfy.sh
        run: |
          curl -H "Title:  Nuevo Push en GitHub" \
               -H "Priority: default" \
               -H "Tags: github,c贸digo" \
               -d " Se actualiz贸 el repositorio ${{ github.repository }}
          
           Usuario: ${{ github.actor }}
           Rama: ${{ github.ref_name }}
           Mensaje: ${{ github.event.head_commit.message }}
           Ver cambios: ${{ github.event.head_commit.url }}" \
               https://ntfy.sh/devops-itla
      
      # Paso 3 (Opcional): Mostrar informaci贸n en el log
      - name: Mostrar informaci贸n del commit
        run: |
          echo "Repositorio: ${{ github.repository }}"
          echo "Usuario: ${{ github.actor }}"
          echo "Rama: ${{ github.ref_name }}"
          echo "Commit: ${{ github.sha }}"
          echo "Mensaje: ${{ github.event.head_commit.message }}"
